{% extends "AppBundle:Amministratore:Abase.html.twig" %}

{% block title %}Nuova categoria {% endblock %}

{% block stylesheets %}
    {{parent()}}
    <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>

    <script src="{{ asset("Amministratore/dist/jstree.min.js") }}"></script>
    <script src="{{ asset("Amministratore/js/salvaCategoria.js") }}"></script>
    <script src="{{ asset("Amministratore/js/AlberoCategorie.js") }}"></script>
{% endblock %}

{% block corpo %}

<div class="content">			
    <div class="container" style ="background: #cacaca;color: #404d5b;">
        <header class="codrops-header">				
            <h1>Nuova Categoria</h1>				
        </header>	
        <form method="post" action ="">	
            <tbody>
                <section class="content">
                    <span class="input input--kaede">
                        <input class="input__field input__field--kaede" type="text" id="nome" input name="nome"/>
                        <label class="input__label input__label--kaede" for="nome">
                            <span class="input__label-content input__label-content--kaede">Nome</span>
                        </label>
                    </span>
                    <span class="input input--kaede">
                            <input class="input__field input__field--kaede" type="text" id="descrizione" input name="descrizione" />
                            <label class="input__label input__label--kaede" for="descrizione">
                                    <span class="input__label-content input__label-content--kaede">Breve descrizione</span>
                            </label>
                    </span>
                    <span class="input input--kaede">
                            <input class="input__field input__field--kaede" type="file" id="immagine" input name="immagine" />
                            <label class="input__label input__label--kaede" for="immagine">
                                    <span class="input__label-content input__label-content--kaede">Immagine</span>
                            </label>
                    </span>	
                </section>
                <td id="divAlbero">
                    <label>MaxiCategoria Padre:</label>
                    <div id="tree-container">
                    <!-- L'abero verrà caricato qui, non inserire codice in questo div -->
                     </div>
                </td>
            </tbody>
            <div class="box bg-3">					
                <button class="button button--nanuk button--border-thin button--round-s">  <a id="invia" type="submit" class="btn-flat primary" onclick=salva();>      <!--Invia</a> -->
                    <span>I</span><span>m</span><span>p</span><span>o</span><span>s</span><span>t</span><span>a</span><span>C</span><span>a</span><span>t</span><span>e</span><span>g</span><span>o</span><span>r</span><span>i</span><span>a</span>   </a>
                </button>
            </div>
        </form>    
    </div><!-- /container -->
</div>
    <script src={{asset("Amministratore/js/dummydata.js")}}></script>
    <script src={{asset("Amministratore/js/classie.js")}}></script>
    <!-- /view -->
    <script src={{asset("Amministratore/js/main.js")}}></script>
    <script>
    (function() {
            var menuEl = document.getElementById('ml-menu'),
                    mlmenu = new MLMenu(menuEl, {
                            // breadcrumbsCtrl : true, // show breadcrumbs
                            // initialBreadcrumb : 'all', // initial breadcrumb text
                            backCtrl : false, // show back button
                            // itemsDelayInterval : 60, // delay between each menu item sliding animation
                            onItemClick: loadDummyData // callback: item that doesn´t have a submenu gets clicked - onItemClick([event], [inner HTML of the clicked item])
                    });

            // mobile menu toggle
            var openMenuCtrl = document.querySelector('.action--open'),
                    closeMenuCtrl = document.querySelector('.action--close');

            openMenuCtrl.addEventListener('click', openMenu);
            closeMenuCtrl.addEventListener('click', closeMenu);

            function openMenu() {
                    classie.add(menuEl, 'menu--open');
            }

            function closeMenu() {
                    classie.remove(menuEl, 'menu--open');
            }

            // simulate grid content loading
            var gridWrapper = document.querySelector('.content');

            function loadDummyData(ev, itemName) {
                    ev.preventDefault();

                    closeMenu();
                    gridWrapper.innerHTML = '';
                    classie.add(gridWrapper, 'content--loading');
                    setTimeout(function() {
                            classie.remove(gridWrapper, 'content--loading');
                            gridWrapper.innerHTML = '<ul class="products">' + dummyData[itemName] + '<ul>';
                    }, 700);
            }
    })();
    </script>	 

    <script>
    $("#divAlbero").toggle();
    $("#divImmagine").toggle();
    $("#divDescrizione").toggle();

    $("#tree-container").on("select_node.jstree",
    function(evt, data){
     $("#invia").show();
      console.log($("#tree-container").jstree('get_selected'));
    }
    );
    </script>
{% endblock %}